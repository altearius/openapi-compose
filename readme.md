# OpenAPI Composition

This project is responsible for compiling various OpenAPI schema definitions
into a single "root level" OpenAPI specification.

The goal is to provide a simple, single-purpose tool that lets developers
more easily split a large OpenAPI specification into a series of smaller
files while automatically maintaining the root-level document's references.

## Usage

This package makes specific assumptions about how a project is structured.

The CLI command accepts a single argument: a path to a template file used to
generate the root level OpenAPI specification.

```sh
yarn @altearius/openapi-compose ./openapi.template.yaml
```

The template file should can be any OpenAPI file, either JSON or YAML, but it
should contain an `$imports` property that is an array of glob patterns that
will be used to find other OpenAPI files to include in the root level
OpenAPI specification:

```yaml
# ./openapi.template.yaml
openapi: 3.1.0
paths:
  $imports: ['**/openapi.yaml']

# ./sub-folder/openapi.yaml (in a nested directory)
openapi: 3.1.0
paths:
  /sub-folder:
    get:
      responses:
        '200': { description: OK }
```

The generated result will be a single OpenAPI specification file that contains
all of the `path` definitions from the imported files. The `$imports` property
is replaced with references to each of the located files:

```yaml
# ./openapi.yaml (generated by the build command)
openapi: 3.1.0
paths:
  /sub-folder:
    $ref: ./sub-folder/openapi.yaml#/paths/~1sub-folder
```

## Contributing

The following developer scripts are provided:

- `build`: Build the project.
- `clean`: Remove build artifacts.
- `lint`: Run ESLint.
- `pretty`: Check formatting using prettier.
